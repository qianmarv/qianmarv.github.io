<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>qianmarv&#39;s personal blog</title>
    <link>http://blog.qianmarv.xyz/</link>
    <description>Recent content on qianmarv&#39;s personal blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Wed, 10 Jan 2018 00:00:00 +0800</lastBuildDate>
    
        <atom:link href="http://blog.qianmarv.xyz/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>关于</title>
      <link>http://blog.qianmarv.xyz/about/</link>
      <pubDate>Thu, 01 Jan 2015 15:10:20 +0800</pubDate>
      
      <guid>http://blog.qianmarv.xyz/about/</guid>
      
        <description>&lt;p&gt;80后非主流挨踢男，思爱普从业人员&lt;/p&gt;
&lt;p&gt;性孤僻，少言语&lt;/p&gt;
&lt;p&gt;喜静，热爱运动、阅读、影视、音乐&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Setup Desktop Notifier For Org-Mode</title>
      <link>http://blog.qianmarv.xyz/post/orgmode-desktop-notifier/</link>
      <pubDate>Wed, 10 Jan 2018 00:00:00 +0800</pubDate>
      
      <guid>http://blog.qianmarv.xyz/post/orgmode-desktop-notifier/</guid>
      
        <description>&lt;p&gt;介绍如何为Emacs中特别是Orgmode中的定时任务建立桌面提醒。&lt;/p&gt;
&lt;h2 id=&#34;背景介绍&#34;&gt;背景介绍&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;orgmode&lt;/code&gt; 中我们可以为某个TODO设置具体的计划开始时间，然后通过Emacs的appt包设
置提醒，比如提前20分钟提醒，然后可以隔5分钟提醒一次等等，但是问题在于这个提醒
是在Emacs中生成一个Buffer，如果这个时候你并不是在Emacs中做事情，那么很可能你就
看不到这个提醒了，所以想法是可以把这个提醒和外部的提醒程序结合起来，这样只要你
是在电脑前工作，你就一定可以收到提醒。&lt;/p&gt;
&lt;p&gt;对于不同的操作系统平台，提醒的程序也是不一样的，目前暂时提供对WIN10的支持，调
用WIN10的Action Center来发送提醒。&lt;/p&gt;
&lt;h2 id=&#34;基础设置&#34;&gt;基础设置&lt;/h2&gt;
&lt;h3 id=&#34;启用appt并将orgmode中schedule到时分秒的todo加入&#34;&gt;启用APPT并将ORGMODE中SCHEDULE到时分秒的TODO加入&lt;/h3&gt;
&lt;p&gt;首先你的TODO当然得设定在时分秒的粒度上，下面是一个例子：
我们创建一个TODO项，写本文的时间是2018-01-10，然后计划在17:00开始做这件事情。
那么我希望有个桌面提醒可以在这个任务开始之前5分钟提醒我。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-org&#34; data-lang=&#34;org&#34;&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;* &lt;/span&gt;TODO Test Desktop Reminder
&lt;span style=&#34;color:#75715e&#34;&gt;       SCHEDULED: &lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;2018-01-10 Wed 17:00&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;TODO有了，下面需要加入到APPT中去，执行命令：
&lt;code&gt;M-x org-agenda-to-appt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;我的工作流是每天早上会安排当天的TODO，其中会议等TODO会在schedule的时候设定固
定时间，然后执行这个命令加入到appt中。&lt;/p&gt;
&lt;p&gt;到目前为止，appt可以用Emacs的内置提醒在制定时间弹出警告了。
你可以调整一下默认的设置如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-emacs-lisp&#34; data-lang=&#34;emacs-lisp&#34;&gt;     (setq appt-message-warning-time &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;; Show notification 5 minutes before event&lt;/span&gt;
     (setq appt-display-interval appt-message-warning-time) &lt;span style=&#34;color:#75715e&#34;&gt;; Disable multiple reminders&lt;/span&gt;
     (setq appt-display-mode-line &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;增加桌面提醒功能&#34;&gt;增加桌面提醒功能&lt;/h3&gt;
&lt;p&gt;首先我们需要一个客户端工具可以设置提醒，最好是通过windows的action center来发
送提醒，这里有不少的option，我经过尝试，选择使用一个叫做 &lt;strong&gt;BurntToast&lt;/strong&gt; 的
&lt;code&gt;Powershell&lt;/code&gt; 下的脚本工具，具体安装可以参见：
&lt;a href=&#34;https://github.com/Windos/BurntToast&#34;&gt;https://github.com/Windos/BurntToast&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;安装完成之后，你可以用windows的cmd来调用下面命令测试：
&lt;code&gt;powershell New-BurntToastNotification -Text &#39;Test&#39; -Sound &#39;Alarm2&#39; -SnoozeAndDismiss&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;现在我们需要写一个elisp function来调用这个程序:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-emacs-lisp&#34; data-lang=&#34;emacs-lisp&#34;&gt;     (defun qianmarv-org/show-alarm (min-to-app new-time &lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;)
       (cond ((&lt;span style=&#34;color:#a6e22e&#34;&gt;string-equal&lt;/span&gt; system-type &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;windows-nt&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)
              (&lt;span style=&#34;color:#a6e22e&#34;&gt;call-process&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;powershell&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;
                            &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
                            &lt;span style=&#34;color:#66d9ef&#34;&gt;t&lt;/span&gt;
                            &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
                            (&lt;span style=&#34;color:#a6e22e&#34;&gt;format&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; New-BurntToastNotification -Text &amp;#39;%s&amp;#39; -Sound &amp;#39;Alarm2&amp;#39; -SnoozeAndDismiss&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;)
                            ))))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;接下来我们要告诉 &lt;code&gt;appt&lt;/code&gt; 要发送桌面提醒，设置如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-emacs-lisp&#34; data-lang=&#34;emacs-lisp&#34;&gt;     (setq appt-disp-window-function &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;qianmarv-org/show-alarm&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;在org-pomodoro中集成桌面提醒功能&#34;&gt;在org-pomodoro中集成桌面提醒功能&lt;/h2&gt;
&lt;p&gt;如果你是一个番茄工作法的爱好者，你使用 &lt;strong&gt;org-pomodoro&lt;/strong&gt; 来工作，应该会碰到之前同
样的困扰，就是一个番茄时间满了之后，如果这是你不是在电脑前面的，你就不会看到
Emacs的提醒信息，导致接下来的工作并没有计入到番茄里面去，同样休息时间也不能够
好好的利用，而如果可以有桌面提醒就不会有这个问题了。你可以通过hook的方式将
org-pomodoro的提醒改为桌面提醒。&lt;/p&gt;
&lt;p&gt;设置如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-emacs-lisp&#34; data-lang=&#34;emacs-lisp&#34;&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;;; Refer to https://gist.github.com/jstewart/7664823&lt;/span&gt;
    (add-hook &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;org-pomodoro-finished-hook&lt;/span&gt;
              (lambda ()
                (qianmarv-org/show-alarm &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Pomodoro completed! - Time for a break.&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)))

    (add-hook &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;org-pomodoro-break-finished-hook&lt;/span&gt;
              (lambda ()
                (qianmarv-org/show-alarm &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Pomodoro Short Break Finished - Ready for Another?&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)))

    (add-hook &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;org-pomodoro-long-break-finished-hook&lt;/span&gt;
              (lambda ()
                (qianmarv-org/show-alarm &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Pomodoro Long Break Finished - Ready for Another?&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)))

    (add-hook &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;org-pomodoro-killed-hook&lt;/span&gt;
              (lambda ()
                (qianmarv-org/show-alarm &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Pomodoro Killed - One does not simply kill a pomodoro!&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;)))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
      
    </item>
    
  </channel>
</rss>
